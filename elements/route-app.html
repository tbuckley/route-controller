<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="../components/polymer-page/polymer-page.html">
<link rel="import" href="../components/polymer-flex-layout/polymer-flex-layout.html">
<link rel="import" href="route-tile-layout/route-tile-layout.html">
<link rel="import" href="route-ui-tile/route-ui-tile.html">
<link rel="import" href="route-ui-lights/route-ui-lights.html">

<polymer-element name="route-app" attributes="">
  <template>
    <link rel="stylesheet" href="css/route-app.css">

    <!-- <polymer-page></polymer-page> -->

    <div id="page">
      <polymer-flex-layout></polymer-flex-layout>

      <div style="position: relative" flex>
        <section id="tiles">
          <route-tile-layout id="tileLayout" layout="{{layout}}"></route-tile-layout>
          <route-ui-lights></route-ui-lights>
          <route-ui-tile></route-ui-tile>
          <route-ui-tile></route-ui-tile>
          <route-ui-tile></route-ui-tile>
          <route-ui-tile></route-ui-tile>
          <route-ui-tile></route-ui-tile>
        </section>
      </div>

      <section id="bar">
        BAR
      </section>
    </div>

  </template>
  <script>
    (function() {
      Polymer("route-app", {
        layout: [
          [1, 2, 3],
          [4, 5, 6],
        ],
        brightness: 0,
        ready: function() {
          window.addEventListener("resize", this.resize.bind(this));
          this.setBrightness();
        },
        setBrightness: function() {
          if(window.Android) {
            Android.setBrightness(this.brightness);
            this.brightness = (this.brightness + 10) % 100;
          }
          // setTimeout(this.setBrightness.bind(this), 1000);
        },
        enteredView: function() {},
        resize: function(e) {
          this.$.tileLayout.invalidate();
        }
      });
    })();
  </script>
</polymer-element>